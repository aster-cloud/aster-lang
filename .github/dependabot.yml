# Dependabot 自动依赖更新配置
# 覆盖：npm (主项目 + 子项目)、Gradle、GitHub Actions、Docker
version: 2
updates:
  # npm - 主项目
  - package-ecosystem: npm
    directory: "/"
    schedule:
      interval: weekly
    open-pull-requests-limit: 5
    commit-message:
      prefix: "deps(npm)"
    groups:
      typescript:
        patterns: ["typescript", "@types/*"]
      vitest:
        patterns: ["vitest", "@vitest/*"]

  # npm - VS Code 扩展
  - package-ecosystem: npm
    directory: "/aster-vscode"
    schedule:
      interval: weekly
    open-pull-requests-limit: 3
    commit-message:
      prefix: "deps(vscode)"

  # npm - Policy Editor
  - package-ecosystem: npm
    directory: "/policy-editor"
    schedule:
      interval: weekly
    open-pull-requests-limit: 3
    commit-message:
      prefix: "deps(editor)"

  # Gradle - Java 依赖
  - package-ecosystem: gradle
    directory: "/"
    schedule:
      interval: weekly
    open-pull-requests-limit: 5
    commit-message:
      prefix: "deps(gradle)"
    groups:
      quarkus:
        patterns: ["io.quarkus*"]
      graalvm:
        patterns: ["org.graalvm*"]

  # GitHub Actions
  - package-ecosystem: github-actions
    directory: "/"
    schedule:
      interval: weekly
    open-pull-requests-limit: 5
    commit-message:
      prefix: "deps(actions)"
    # 提示：Actions 变动需关注权限范围，合并前请复核 workflow 运行记录

  # Docker - 主 Dockerfile
  - package-ecosystem: docker
    directory: "/"
    schedule:
      interval: monthly
    open-pull-requests-limit: 2
    commit-message:
      prefix: "deps(docker)"

  # Docker - Quarkus Policy API
  - package-ecosystem: docker
    directory: "/quarkus-policy-api"
    schedule:
      interval: monthly
    open-pull-requests-limit: 2
    commit-message:
      prefix: "deps(docker)"
