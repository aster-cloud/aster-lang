# Operations Log

- 2025-11-10 12:21 NZST — Codex：啟動 sequential-thinking 工具整理執行思路，確認任務步驟。
- 2025-11-10 12:21 NZST — Codex：設置 code-index 專案路徑並查找 operations-log.md 位置，為後續檢索做準備。
- 2025-11-10 12:22 NZST — Codex：檢視 build/aster-out/aster.jar 內容並確認 order_fulfillment 已輸出為 fulfillOrder_fn.class。
- 2025-11-10 12:22 NZST — Codex：進一步檢查 payment_compensation 與 inventory_replenishment workflow 類的 jar 內容。
- 2025-11-10 12:22 NZST — Codex：使用 javap 確認 fulfillOrder/processFailedPayment/replenishInventory 的靜態 Result 介面。
- 2025-11-10 12:22 NZST — Codex：閱讀 PostgresWorkflowRuntime，掌握調度機制、事件存儲與結果 future 管理。
- 2025-11-10 12:23 NZST — Codex：分析 WorkflowSchedulerService，了解輪詢策略、補償流程與 runtime 通知。
- 2025-11-10 12:23 NZST — Codex：查閱 aster-runtime WorkflowRuntime 介面定義以確認 schedule/clock/event store 职责。
- 2025-11-10 12:23 NZST — Codex：檢視 OrderResourceTest，了解 Quarkus 測試配置與 QuarkusMock 模式。
- 2025-11-10 12:23 NZST — Codex：閱讀 OrderResource 以掌握 workflow 模組/函數配置與 metadata 結構。
- 2025-11-10 12:24 NZST — Codex：審閱 quarkus-policy-api/build.gradle.kts，確認 aster.jar 及 syncPolicyJar/syncPolicyClasses 任務與測試依賴。
- 2025-11-10 12:24 NZST — Codex：閱讀 PostgresEventStore 以了解事件存儲、狀態推導與 NOTIFY 流程。
- 2025-11-10 12:25 NZST — Codex：查閱 SimplePolicyE2ETest，記錄 Awaitility 用法與現有整合測試模式。
- 2025-11-10 12:25 NZST — Codex：查看 quarkus-policy-api/application.properties，釐清 PostgreSQL 正常配置與全域 CORS/GraphQL 設定。
- 2025-11-10 12:25 NZST — Codex：分析 SagaCompensationExecutor，了解補償事件流程與 Step 事件推導。
- 2025-11-10 12:26 NZST — Codex：閱讀 WorkflowAuditResource，掌握 workflow 觀測 API 與狀態統計查詢。
- 2025-11-10 12:26 NZST — Codex：檢查 quarkus-policy-api/src/main/resources，確認 syncPolicyJar 將 fulfillOrder_fn 等類複製進 classpath。
- 2025-11-10 12:28 NZST — Codex：閱讀 PolicyEvaluationE2ETest，收集現有 Quarkus 整合測試與審計驗證手法。
- 2025-11-10 12:28 NZST — Codex：檢視 TestAuditEventRecorder，了解測試中如何透過 CDI 捕獲異步審計事件。
- 2025-11-10 12:28 NZST — Codex：查閱 workflow 相關 Flyway 腳本，確認事件表/狀態表/定時器表結構。
- 2025-11-10 12:32 NZST — Codex：彙整掃描結果並寫入 .claude/context-integration-test.json。
- 2025-11-10 12:40 NZST — Codex：新增 IntegrationTestProfile/TestStubProducers，配置 H2+Flyway 與內存 stub。
- 2025-11-10 12:45 NZST — Codex：為 H2 建立覆蓋版 Flyway 腳本（workflow_events/state/timers/audit 表）。
- 2025-11-10 12:48 NZST — Codex：調整 WorkflowSchedulerService/PostgresEventStore 以支援 H2（禁用 SKIP LOCKED、NOTIFY）。
- 2025-11-10 12:50 NZST — Codex：更新 PostgresWorkflowRuntime/WorkflowEventEntity 以避免重複 WorkflowStarted 事件。
- 2025-11-10 12:52 NZST — Codex：執行 ./gradlew :quarkus-policy-api:test --tests io.aster.ecommerce.integration.OrderWorkflowIntegrationTest，H2 環境下測試通過。
