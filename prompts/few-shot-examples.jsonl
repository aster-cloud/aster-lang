{"id":"train-036","english_description":"Show a helper that adds two integers and returns their sum.","cnl_code":"This module is tests.typecheck.basic.\n\nTo add with x: Int, y: Int, produce Int:\n  Return +(x, y).","category":"basic","tags":["basic_types","arithmetic"],"difficulty":"easy"}
{"id":"train-001","english_description":"Prepend a bracketed tag in front of a log message.","cnl_code":"This module is ai.generated.case7.\n\nTo taggedMessage with tag: Text, body: Text, produce Text:\n  Let bracket be Text.concat(\"[\", tag).\n  Let label be Text.concat(bracket, \"] \").\n  Return Text.concat(label, body).","category":"basic","tags":["text","formatting"],"difficulty":"easy"}
{"id":"train-017","english_description":"Call Time.now and HTTP ping to build a timestamped heartbeat.","cnl_code":"This module is ai.generated.case23.\n\nTo timestampedPing, produce Text. It performs io [Time, Http]:\n  Let ts be Time.now().\n  Let resp be Http.get(\"/ping\").\n  Let prefix be Text.concat(ts, \": \").\n  Return Text.concat(prefix, resp).","category":"effects","tags":["time","http"],"difficulty":"easy"}
{"id":"train-003","english_description":"Evaluate loan applications by checking age, credit score, and computing rate ladders.","cnl_code":"This module is aster.finance.loan.\n\nDefine LoanApplication with applicantId: Text, amount: Number, termMonths: Number, purpose: Text.\n\nDefine ApplicantProfile with age: Number, creditScore: Number, annualIncome: Number, monthlyDebt: Number, yearsEmployed: Number.\n\nDefine LoanDecision with approved: Bool, reason: Text, approvedAmount: Number, interestRate: Number, termMonths: Number.\n\nTo evaluateLoanEligibility with application: LoanApplication, applicant: ApplicantProfile, produce LoanDecision:\n  If <(applicant.age, 18),:\n    Return LoanDecision with approved = false, reason = \"Age below 18\", approvedAmount = 0, interestRate = 0, termMonths = 0.\n  If >(applicant.age, 75),:\n    Return LoanDecision with approved = false, reason = \"Age above 75\", approvedAmount = 0, interestRate = 0, termMonths = 0.\n  If <(applicant.creditScore, 650),:\n    Return LoanDecision with approved = false, reason = \"Credit below 650\", approvedAmount = 0, interestRate = 0, termMonths = 0.\n  Let rate be determineInterestRate(applicant.creditScore).\n  Return LoanDecision with approved = true, reason = \"Approved\", approvedAmount = application.amount, interestRate = rate, termMonths = application.termMonths.\n\nTo determineInterestRate with creditScore: Number, produce Number:\n  If >=(creditScore, 800),:\n    Return 3.5.\n  If >=(creditScore, 740),:\n    Return 4.25.\n  If >=(creditScore, 670),:\n    Return 5.5.\n  Return 6.75.","category":"complex","tags":["finance","loan"],"difficulty":"medium"}
{"id":"train-065","english_description":"Reserve and release inventory with the correct capability declarations.","cnl_code":"This module is test.typechecker.inventory_success.\n\nTo reserveInventoryValid with orderId: Text, produce Result of Text. It performs io [Inventory]:\n  Return ok of Inventory.reserve(orderId, List.empty()).\n\nTo releaseInventoryValid with reservationId: Text, produce Result of Text. It performs io [Inventory]:\n  Return ok of Inventory.release(reservationId).","category":"effects","tags":["capability","inventory","result"],"difficulty":"easy"}
{"id":"train-020","english_description":"Propagate tagged user data into an HTTP POST to demonstrate privacy violations.","cnl_code":"This module is test.pii.propagation.\n\nTo process_user with name: Text, produce Text. It performs io [Http]:\n  Let user_name be name.\n  Return Http.post(\"/api/users\", user_name).","category":"security","tags":["pii","http"],"difficulty":"medium"}
{"id":"golden-payment","english_description":"Show valid usage of the Payment capability for charge and refund helpers.","cnl_code":"This module is test.typechecker.payment_success.\n\nTo processPaymentValid with orderId: Text, amount: Int, produce Result of Text. It performs io [Payment]:\n  Return ok of Payment.charge(orderId, amount).\n\nTo refundPaymentValid with paymentId: Text, produce Result of Text. It performs io [Payment]:\n  Return ok of Payment.refund(paymentId).","category":"effects","tags":["capability","payment","result"],"difficulty":"easy"}
{"id":"train-005","english_description":"Build a general-purpose business rules engine with condition evaluation and actions.","cnl_code":"This module is demo.rules.\n\nDefine a RuleType as one of Access or Validation or Transformation or Notification.\n\nDefine a RulePriority as one of Low or Medium or High or Critical.\n\nDefine a RuleCondition with field: Text and operator: Text and value: Text.\n\nDefine a BusinessRule with id: Text and name: Text and type: RuleType and priority: RulePriority and conditions: list of RuleCondition and action: Text and enabled: Bool.\n\nDefine a RuleContext with userId: Text and userRole: Text and resourceId: Text and resourceType: Text and metadata: Text and timestamp: Number.\n\nTo createAccessRule with id: Text and name: Text and conditions: list of RuleCondition, produce BusinessRule:\n  Return BusinessRule(id, name, Access, High, conditions, \"ALLOW\", true).\n\nTo createValidationRule with id: Text and name: Text and conditions: list of RuleCondition, produce BusinessRule:\n  Return BusinessRule(id, name, Validation, Medium, conditions, \"VALIDATE\", true).\n\nTo createTransformationRule with id: Text and name: Text and conditions: list of RuleCondition, produce BusinessRule:\n  Return BusinessRule(id, name, Transformation, Low, conditions, \"TRANSFORM\", true).\n\nTo evaluateCondition with condition: RuleCondition and context: RuleContext, produce Bool:\n  Define fieldValue as getFieldValue(condition.field, context).\n  If Text.equals(condition.operator, \"equals\"),:\n    Return Text.equals(fieldValue, condition.value).\n  If Text.equals(condition.operator, \"not_equals\"),:\n    Return not Text.equals(fieldValue, condition.value).\n  If Text.equals(condition.operator, \"contains\"),:\n    Return Text.contains(fieldValue, condition.value).\n  If Text.equals(condition.operator, \"starts_with\"),:\n    Return Text.startsWith(fieldValue, condition.value).\n  If Text.equals(condition.operator, \"ends_with\"),:\n    Return Text.endsWith(fieldValue, condition.value).\n  If Text.equals(condition.operator, \"greater_than\"),:\n    Return Number.greaterThan(Number.parse(fieldValue), Number.parse(condition.value)).\n  If Text.equals(condition.operator, \"less_than\"),:\n    Return Number.lessThan(Number.parse(fieldValue), Number.parse(condition.value)).\n  If Text.equals(condition.operator, \"in\"),:\n    Return Text.contains(condition.value, fieldValue).\n  If Text.equals(condition.operator, \"not_in\"),:\n    Return not Text.contains(condition.value, fieldValue).\n  Return false.\n\nTo getFieldValue with field: Text and context: RuleContext, produce Text:\n  If Text.equals(field, \"userId\"),:\n    Return context.userId.\n  If Text.equals(field, \"userRole\"),:\n    Return context.userRole.\n  If Text.equals(field, \"resourceId\"),:\n    Return context.resourceId.\n  If Text.equals(field, \"resourceType\"),:\n    Return context.resourceType.\n  If Text.equals(field, \"metadata\"),:\n    Return context.metadata.\n  If Text.equals(field, \"timestamp\"),:\n    Return Number.toString(context.timestamp).\n  Return \"\".\n\nTo evaluateRule with rule: BusinessRule and context: RuleContext, produce Bool:\n  If not rule.enabled,:\n    Return false.\n  Return evaluateAllConditions(rule.conditions, context).\n\nTo evaluateAllConditions with conditions: list of RuleCondition and context: RuleContext, produce Bool:\n  If List.isEmpty(conditions),:\n    Return true.\n  Define firstCondition as List.head(conditions).\n  Define restConditions as List.tail(conditions).\n  If not evaluateCondition(firstCondition, context),:\n    Return false.\n  Return evaluateAllConditions(restConditions, context).\n\nTo evaluateRulesWithList with rules: list of BusinessRule and context: RuleContext, produce list of Text:\n  If List.isEmpty(rules),:\n    Return [].\n  Define firstRule as List.head(rules).\n  Define restRules as List.tail(rules).\n  Define results as evaluateRulesWithList(restRules, context).\n  If evaluateRule(firstRule, context),:\n    Return List.cons(firstRule.action, results).\n  Return results.\n\nTo createAdminAccessRule, produce BusinessRule:\n  Define conditions as [RuleCondition(\"userRole\", \"equals\", \"admin\")].\n  Return createAccessRule(\"admin_access\", \"Admin Full Access\", conditions).\n\nTo createUserReadOwnRule, produce BusinessRule:\n  Define conditions as [RuleCondition(\"userRole\", \"equals\", \"user\"), RuleCondition(\"resourceId\", \"starts_with\", \"user_\")].\n  Return createAccessRule(\"user_read_own\", \"User Read Own Resources\", conditions).\n\nTo createValidateEmailRule, produce BusinessRule:\n  Define conditions as [RuleCondition(\"metadata\", \"contains\", \"@\")].\n  Return createValidationRule(\"validate_email\", \"Email Validation\", conditions).\n\nTo createTransformDataRule, produce BusinessRule:\n  Define conditions as [RuleCondition(\"resourceType\", \"equals\", \"document\")].\n  Return createTransformationRule(\"transform_data\", \"Data Transformation\", conditions).\n\nTo createSampleRules, produce list of BusinessRule:\n  Define adminRule as createAdminAccessRule().\n  Define userRule as createUserReadOwnRule().\n  Define emailRule as createValidateEmailRule().\n  Define transformRule as createTransformDataRule().\n  Return [adminRule, userRule, emailRule, transformRule].\n\nTo createSampleContext with userId: Text and userRole: Text and resourceId: Text and resourceType: Text, produce RuleContext:\n  Return RuleContext(userId, userRole, resourceId, resourceType, \"\", 0.0).\n\nTo runRulesEngine with rules: list of BusinessRule and context: RuleContext, produce Text:\n  Define results as evaluateRulesWithList(rules, context).\n  If List.isEmpty(results),:\n    Return \"NO_ACTIONS\".\n  Return Text.join(\";\", results).","category":"complex","tags":["rules","engine"],"difficulty":"hard"}
{"id":"phase3-complex-loan","english_description":"Score a loan request by checking credit score, debt ratio, and assigning an interest rate.","cnl_code":"This module is examples.loan_scoring.\n\nDefine LoanRequest with applicantId: Text, creditScore: Int, debtRatio: Number, amount: Int.\n\nDefine LoanScore with score: Number, rate: Double.\n\nTo scoreLoan with request: LoanRequest, produce LoanScore:\n  If <(request.creditScore, 600),:\n    Return LoanScore with score = 0, rate = 12.5.\n  If >(request.debtRatio, 0.5),:\n    Return LoanScore with score = 1, rate = 10.0.\n  If <(request.creditScore, 700),:\n    Return LoanScore with score = 3, rate = 7.5.\n  If <(request.debtRatio, 0.3),:\n    Return LoanScore with score = 5, rate = 4.5.\n  Return LoanScore with score = 10, rate = 6.0.","category":"complex","tags":["loan","scoring","multi-field","number-double-mixed"],"difficulty":"medium"}
{"id":"phase3-workflow-no-compensation","english_description":"Demonstrate a workflow with an IO step that does not declare any compensation handler.","cnl_code":"This module is examples.simple_workflow.\n\nTo fetchDataWorkflow, produce Workflow of Text and None and IO. It performs io:\n  workflow:\n    step getData:\n      Let response be Http.get(\"/api/data\").\n      Return ok of response.\n    .","category":"effects","tags":["workflow","io","no-compensation"],"difficulty":"medium"}
