import{_ as i,c as a,o as l,aj as s}from"./chunks/framework.Bz2R-749.js";const h=JSON.parse('{"title":"LSP Quick Fix Tutorial","description":"","frontmatter":{"title":"LSP Quick Fix Tutorial"},"headers":[],"relativePath":"guide/lsp-tutorial.md","filePath":"guide/lsp-tutorial.md"}'),t={name:"guide/lsp-tutorial.md"};function o(n,e,r,d,c,u){return l(),a("div",null,[...e[0]||(e[0]=[s(`<h1 id="lsp-quick-fix-tutorial" tabindex="-1">LSP Quick Fix Tutorial <a class="header-anchor" href="#lsp-quick-fix-tutorial" aria-label="Permalink to “LSP Quick Fix Tutorial”">​</a></h1><p>This short walkthrough shows how to use Aster’s LSP code actions (Quick Fixes) on a small, imperfect file and iteratively bring it to a clean state.</p><h2 id="_1-start-with-a-rough-file" tabindex="-1">1) Start with a rough file <a class="header-anchor" href="#_1-start-with-a-rough-file" aria-label="Permalink to “1) Start with a rough file”">​</a></h2><p>Create a new file, for example <code>test/cnl/tutorial/demo.aster</code>, with intentionally missing pieces:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>To hello, produce Text</span></span>
<span class="line"><span>  Let x be 1.</span></span>
<span class="line"><span>  Return Text.concat(&quot;Hi &quot;, name).</span></span></code></pre></div><p>Notes:</p><ul><li>Missing module header</li><li>Missing <code>:</code> at the end of the <code>To hello …</code> header</li><li>Ambiguous numeric literal <code>1</code> (may affect overloads elsewhere)</li><li>Potentially undefined <code>name</code> (we’ll focus on code actions in this tutorial)</li></ul><h2 id="_2-open-in-vs-code-or-your-lsp-client" tabindex="-1">2) Open in VS Code (or your LSP client) <a class="header-anchor" href="#_2-open-in-vs-code-or-your-lsp-client" aria-label="Permalink to “2) Open in VS Code (or your LSP client)”">​</a></h2><p>Ensure the Aster LSP is running (via the bundled VS Code extension or a custom client pointing to <code>dist/src/lsp/server.js --stdio</code>).</p><p>Recommended settings (Settings → Aster Language Server):</p><ul><li><code>format.mode</code>: <code>lossless</code></li><li><code>format.reflow</code>: <code>true</code></li><li><code>index.persist</code>: <code>true</code></li><li><code>diagnostics.workspace</code>: <code>true</code></li></ul><h2 id="_3-apply-quick-fixes" tabindex="-1">3) Apply Quick Fixes <a class="header-anchor" href="#_3-apply-quick-fixes" aria-label="Permalink to “3) Apply Quick Fixes”">​</a></h2><p>With the cursor on the first line:</p><ul><li><p>Missing module header</p><ul><li>Use Quick Fix (Cmd/Ctrl+.) → “Fix: Add module header …”</li><li>The LSP infers a module name from the file path, for example <code>tutorial.demo</code>.</li></ul></li><li><p>Missing punctuation</p><ul><li>When a diagnostic reports “Expected &#39;:&#39; or &#39;.&#39; at end of line”, use Quick Fix → “Fix: add &#39;:&#39; at end of line”.</li><li>Result header: <code>To hello, produce Text:</code></li></ul></li><li><p>Disambiguate numeric overloads</p><ul><li>Select the region containing <code>1</code> and trigger Quick Fix → “Fix: Disambiguate numeric overloads in selection”.</li><li>The LSP updates ambiguous numerics to explicit <code>1L</code> or <code>1.0</code> when relevant.</li></ul></li></ul><p>If you reference capabilities or interop helpers, additional Quick Fixes appear:</p><ul><li>Capability headers <ul><li>If diagnostics indicate an IO/CPU effect mismatch, use Quick Fix → “Add It performs IO/CPU …”.</li><li>With <code>ASTER_CAPS</code> set to a JSON manifest, the LSP can also update the manifest to allow specific functions or modules.</li></ul></li></ul><h2 id="_4-use-links-and-hints" tabindex="-1">4) Use Links and Hints <a class="header-anchor" href="#_4-use-links-and-hints" aria-label="Permalink to “4) Use Links and Hints”">​</a></h2><ul><li><p>Inlay hints</p><ul><li>Enable inlay hints in your editor to see inferred types at <code>let</code> statements, parameter type hints, and function return type hints.</li></ul></li><li><p>Document links</p><ul><li>Clicking the module name in <code>This module is …</code> can jump to the module file (if indexed).</li><li><code>Text.*</code> references link to the Interop Overloads guide explaining overload resolution and nullability policies.</li></ul></li></ul><h2 id="_5-final-result-example" tabindex="-1">5) Final result (example) <a class="header-anchor" href="#_5-final-result-example" aria-label="Permalink to “5) Final result (example)”">​</a></h2><p>After applying fixes, a cleaned version might look like:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>This module is tutorial.demo.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>To hello, produce Text:</span></span>
<span class="line"><span>  Let x be 1.</span></span>
<span class="line"><span>  Return Text.concat(&quot;Hi &quot;, name).</span></span></code></pre></div><p>You can now use additional features:</p><ul><li>Format document (lossless or normalize)</li><li>Go to definition, find references, rename</li><li>Workspace diagnostics and symbols via the persisted index</li></ul><h2 id="see-also" tabindex="-1">See also <a class="header-anchor" href="#see-also" aria-label="Permalink to “See also”">​</a></h2><ul><li>Code Actions overview: docs/guide/lsp-code-actions.md</li><li>Interop Overloads: docs/guide/interop-overloads.md</li><li>Formatting and LSP setup: docs/guide/formatting.md</li></ul>`,25)])])}const m=i(t,[["render",o]]);export{h as __pageData,m as default};
