import{_ as i,c as a,o as t,aj as e}from"./chunks/framework.Bz2R-749.js";const c=JSON.parse('{"title":"CLI 命令参考（包管理）","description":"","frontmatter":{},"headers":[],"relativePath":"guide/cli/commands.md","filePath":"guide/cli/commands.md"}'),l={name:"guide/cli/commands.md"};function n(h,s,p,k,d,o){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="cli-命令参考-包管理" tabindex="-1">CLI 命令参考（包管理） <a class="header-anchor" href="#cli-命令参考-包管理" aria-label="Permalink to “CLI 命令参考（包管理）”">​</a></h1><blockquote><p>更新：2025-11-25 09:46 NZST · Codex</p></blockquote><p>本页聚焦包管理相关的 CLI 子命令：<code>install</code>、<code>list</code>、<code>update</code>、<code>search</code>。每个命令都包含常用选项、示例与典型终端输出，便于在本地、CI 以及生产回滚时复用。</p><h2 id="install-—-安装依赖" tabindex="-1">install — 安装依赖 <a class="header-anchor" href="#install-—-安装依赖" aria-label="Permalink to “install — 安装依赖”">​</a></h2><p><strong>语法</strong>：<code>aster pkg install [&lt;name@range&gt; ...] [options]</code></p><p><strong>常用选项</strong>：</p><ul><li><code>--registry &lt;url&gt;</code>：覆盖默认 registry（GitHub Releases）。</li><li><code>--dev/--no-dev</code>：是否安装 <code>devDependencies</code>。</li><li><code>--explain</code>：输出解析与回溯过程。</li><li><code>--lockfile &lt;path&gt;</code>：自定义锁文件位置，适合多工作树。</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wontlost/http@^1.6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wontlost/serde@~2.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --explain</span></span></code></pre></div><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Resolving wontlost/http@^1.6 -&gt; 1.6.2</span></span>
<span class="line"><span>Resolving wontlost/serde@~2.0 -&gt; 2.0.4</span></span>
<span class="line"><span>✓ wrote aster.lock (2 packages)</span></span></code></pre></div><p>安装完成后即可在模块中直接引用：</p><div class="language-aster"><button title="Copy Code" class="copy"></button><span class="lang">aster</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wontlost/http </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fn heartbeat(url: Text): IO[Unit] {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  http::get(url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>在 CI 中建议配合 <code>--locked</code>（默认读取现有 <code>aster.lock</code>，若锁缺失则失败），保证分支始终使用经过审查的依赖集。</p></div><h2 id="list-—-查看依赖状态" tabindex="-1">list — 查看依赖状态 <a class="header-anchor" href="#list-—-查看依赖状态" aria-label="Permalink to “list — 查看依赖状态”">​</a></h2><p><strong>语法</strong>：<code>aster pkg list [options]</code></p><p><strong>常用选项</strong>：</p><ul><li><code>--status &lt;linked|cached|outdated&gt;</code>：过滤展示范围。</li><li><code>--summary</code>：仅输出统计信息。</li><li><code>--json</code>：以 JSON 形式输出，方便脚本消费。</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linked</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --json</span></span></code></pre></div><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>[</span></span>
<span class="line"><span>  {&quot;name&quot;:&quot;wontlost/http&quot;,&quot;version&quot;:&quot;1.6.2&quot;,&quot;capabilities&quot;:[&quot;io.net&quot;]},</span></span>
<span class="line"><span>  {&quot;name&quot;:&quot;wontlost/serde&quot;,&quot;version&quot;:&quot;2.0.4&quot;,&quot;capabilities&quot;:[&quot;cpu&quot;]}</span></span>
<span class="line"><span>]</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p><code>--json</code> 输出会被写到 stdout，若你需要同时查看人类可读格式，请重定向 <code>--json &gt; report.json</code>，否则终端信息会被 JSON 覆盖。</p></div><h2 id="update-—-升级已安装包" tabindex="-1">update — 升级已安装包 <a class="header-anchor" href="#update-—-升级已安装包" aria-label="Permalink to “update — 升级已安装包”">​</a></h2><p><strong>语法</strong>：<code>aster pkg update [&lt;name&gt;] [options]</code></p><ul><li>若省略包名，则根据 SemVer 范围升级全部依赖。</li><li><code>--to &lt;version&gt;</code>：强制跳到指定版本。</li><li><code>--preid &lt;tag&gt;</code>：允许安装预发布标签（如 <code>beta</code>）。</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wontlost/http</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --to</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.7.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --lockfile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release/aster.lock</span></span></code></pre></div><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Current lock: 1.6.2 → Candidate: 1.7.0 (compatible)</span></span>
<span class="line"><span>✓ updated wontlost/http in release/aster.lock</span></span></code></pre></div><p>升级后请运行冒烟测试确认：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test:golden</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> outdated</span></span></code></pre></div><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Outdated packages: 0</span></span></code></pre></div><h2 id="search-—-查找远程包" tabindex="-1">search — 查找远程包 <a class="header-anchor" href="#search-—-查找远程包" aria-label="Permalink to “search — 查找远程包”">​</a></h2><p><strong>语法</strong>：<code>aster pkg search &lt;keyword&gt; [options]</code></p><p><strong>常用选项</strong>：</p><ul><li><code>--limit &lt;n&gt;</code>：最多返回 <code>n</code> 个结果。</li><li><code>--capability &lt;name&gt;</code>：按能力过滤，例如 <code>io.db</code>。</li><li><code>--registry &lt;url&gt;</code>：查询其他 registry。</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> search</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --capability</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> io.net</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span></code></pre></div><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>• wontlost/http           1.7.0  ⭐ 390  — HTTP client with IO net capability</span></span>
<span class="line"><span>• asterlabs/http-metrics  0.3.2  ⭐  58  — HTTP hooks with metrics signals</span></span>
<span class="line"><span>• skylight/http-server    0.6.1  ⭐ 104  — Async HTTP server primitives</span></span></code></pre></div><p>如需根据搜索结果快速验证 API，可在 REPL 中导入：</p><div class="language-aster"><button title="Copy Code" class="copy"></button><span class="lang">aster</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> skylight/http-server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fn main(): IO[Unit] {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server::start(8080)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>执行 <code>aster pkg install skylight/http-server@0.6.1</code> 后即可运行上面的示例。</p>`,36)])])}const g=i(l,[["render",n]]);export{c as __pageData,g as default};
