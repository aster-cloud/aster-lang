import{_ as a,c as l,o as i,aj as r}from"./chunks/framework.Bz2R-749.js";const h=JSON.parse('{"title":"Truffle Backend è¯´æ˜","description":"","frontmatter":{},"headers":[],"relativePath":"runtime/truffle-backend.md","filePath":"runtime/truffle-backend.md"}'),t={name:"runtime/truffle-backend.md"};function c(d,e,o,n,f,s){return i(),l("div",null,[...e[0]||(e[0]=[r('<blockquote><p>æ›´æ–°ï¼š2025-11-22 16:57 NZST Â· æ‰§è¡Œè€…ï¼šCodex</p></blockquote><h1 id="truffle-backend-è¯´æ˜" tabindex="-1">Truffle Backend è¯´æ˜ <a class="header-anchor" href="#truffle-backend-è¯´æ˜" aria-label="Permalink to â€œTruffle Backend è¯´æ˜â€">â€‹</a></h1><h2 id="è®¾è®¡ç†å¿µ" tabindex="-1">è®¾è®¡ç†å¿µ <a class="header-anchor" href="#è®¾è®¡ç†å¿µ" aria-label="Permalink to â€œè®¾è®¡ç†å¿µâ€">â€‹</a></h2><p>Truffle backend åŸºäº GraalVM Truffle æ¡†æ¶æ„å»ºï¼Œç›®æ ‡æ˜¯åœ¨çº¯è®¡ç®—åœºæ™¯ä¸‹æä¾›æœ€é«˜ååä¸æœ€ä½å»¶è¿Ÿã€‚é€šè¿‡å°† Aster AST æ˜ å°„ä¸º Truffle AST Nodeï¼Œå¯è®© GraalVM JIT è¿›è¡Œ AST å†…è”ã€ç‰¹åŒ–ä¸é€ƒé€¸åˆ†æï¼Œè·å¾—æ¥è¿‘æ‰‹å†™ Java çš„æ€§èƒ½è¡¨ç°ã€‚è¯¥ backend ä»…å…³æ³¨ç¡®å®šæ€§ã€å¯æ¨ç†çš„ CPU è®¡ç®—ï¼Œä¸æä¾›ä¸å¤–ç•Œäº¤äº’çš„èƒ½åŠ›ï¼Œä»è€Œé™ä½å®‰å…¨é¢ä¸å®ç°å¤æ‚åº¦ã€‚</p><h2 id="æ”¯æŒåŠŸèƒ½" tabindex="-1">æ”¯æŒåŠŸèƒ½ <a class="header-anchor" href="#æ”¯æŒåŠŸèƒ½" aria-label="Permalink to â€œæ”¯æŒåŠŸèƒ½â€">â€‹</a></h2><ul><li>âœ… çº¯ CPU è®¡ç®—ä¸æ•°æ®è½¬æ¢ï¼ŒåŒ…å«æ•°å€¼ã€é›†åˆã€Pattern Matchingã€Result/Option ç­‰å†…å»ºç»“æ„ã€‚</li><li>âœ… GraalVM ç‰¹åŒ–ä¼˜åŒ–ï¼šTail Call ä¼˜åŒ–ã€Partial Evaluationã€Inliningã€Loop Peelingã€‚</li><li>âœ… ä¸ Aster TypeChecker å¯¹é½çš„ effect/capability æ ¡éªŒï¼Œç¡®ä¿ pure/async/io åŒºåˆ†åœ¨ runtime ä¿æŒä¸€è‡´ã€‚</li><li>âœ… ä¸ Aster å…¶ä»– backend å…±äº«çš„å†…å»ºåº“ï¼ˆList/Map/Result ç­‰ï¼‰è¯­ä¹‰ã€‚</li></ul><h2 id="å…³é”®é™åˆ¶" tabindex="-1">å…³é”®é™åˆ¶ <a class="header-anchor" href="#å…³é”®é™åˆ¶" aria-label="Permalink to â€œå…³é”®é™åˆ¶â€">â€‹</a></h2><ul><li>âŒ ä¸æ”¯æŒä»»ä½• IO effect æ“ä½œï¼Œæ‰€æœ‰ <code>IO.*</code> å†…å»ºå‡½æ•°åœ¨è¿è¡ŒæœŸç›´æ¥æŠ›å‡º UnsupportedOperationExceptionã€‚</li><li>âŒ ä¸æ”¯æŒ <code>Http.*</code>ã€<code>Db.*</code>ã€<code>AuthRepo.*</code> ç­‰ä¾èµ–å¤–éƒ¨ç³»ç»Ÿçš„å‘½åç©ºé—´ã€‚</li><li>âŒ ä¸æä¾›æ–‡ä»¶ã€ç½‘ç»œã€æ•°æ®åº“æˆ– Secrets è®¿é—®èƒ½åŠ›ã€‚</li><li>âŒ ä¸æ”¯æŒé•¿ç”Ÿå‘½å‘¨æœŸçš„å¼‚æ­¥äº‹ä»¶ï¼ˆä»…æä¾› await å ä½å®ç°è¿”å›åŸå€¼ï¼‰ã€‚</li><li>âš ï¸ æ‰€æœ‰ effect å¿…é¡»åœ¨ç¼–è¯‘æœŸé™æ€ç¡®å®šï¼›Truffle backend ä¸å®ç°åŠ¨æ€ capability è°ƒåº¦ã€‚</li></ul><h3 id="io-æ“ä½œé™åˆ¶åˆ—è¡¨" tabindex="-1">IO æ“ä½œé™åˆ¶åˆ—è¡¨ <a class="header-anchor" href="#io-æ“ä½œé™åˆ¶åˆ—è¡¨" aria-label="Permalink to â€œIO æ“ä½œé™åˆ¶åˆ—è¡¨â€">â€‹</a></h3><p>å‚è€ƒç°æœ‰ stdlib å¥‘çº¦ï¼Œä»¥ä¸‹æ“ä½œå‡ä¸å¯ç”¨ï¼š</p><ul><li><code>IO.print(Text msg)</code>ï¼šè¿”å› Textï¼ŒTruffle backend ä¸­ç›´æ¥æŠ›é”™ï¼Œå»ºè®®åˆ‡æ¢ Java/TypeScript backendã€‚</li><li><code>IO.readLine()</code>ï¼šåŸè®¾è®¡åº”è¿”å› Textï¼Œåœ¨ Truffle backend ä¸å¯è°ƒç”¨ã€‚</li><li><code>IO.readFile(Text path)</code>ï¼šåŸè®¾è®¡è¿”å› <code>Result&lt;Text, Text&gt;</code>ï¼›åœ¨ Truffle backend æ— æ–‡ä»¶è®¿é—®èƒ½åŠ›ã€‚</li><li><code>IO.writeFile(Text path, Text contents)</code>ï¼šåŸè®¾è®¡è¿”å› Boolï¼›Truffle backend æ— å†™å…¥èƒ½åŠ›ã€‚ å¯¹äº Http/Db å‘½åç©ºé—´ï¼Œå¯å‚è€ƒ backend å¯¹æ¯”æ–‡æ¡£ä¸­çš„æ›¿ä»£æ–¹æ¡ˆã€‚</li></ul><h2 id="æ¨èä½¿ç”¨åœºæ™¯" tabindex="-1">æ¨èä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#æ¨èä½¿ç”¨åœºæ™¯" aria-label="Permalink to â€œæ¨èä½¿ç”¨åœºæ™¯â€">â€‹</a></h2><ul><li>ğŸ”¹ é«˜æ€§èƒ½è®¡ç®—ï¼šæ‰¹é‡è§„åˆ™ç¼–æ’ã€å®æ—¶é£æ§è¯„åˆ†ã€éœ€è¦ microsecond çº§å“åº”çš„åŒæ­¥è°ƒç”¨ã€‚</li><li>ğŸ”¹ å¤šè¯­è¨€äº’æ“ä½œï¼šä¾æ‰˜ GraalVMï¼Œå¯ä¸ Java/JavaScript/R åŸç”Ÿäº’è°ƒï¼Œé€‚ç”¨äºåµŒå…¥å¼åœºæ™¯ã€‚</li><li>ğŸ”¹ å®‰å…¨éš”ç¦»ï¼šç”±äºæ—  IOï¼Œé€‚åˆåœ¨å—é™ç¯å¢ƒè¿è¡Œæ•æ„Ÿç®—æ³•ï¼Œé¿å…æ•°æ®æ³„éœ²é£é™©ã€‚</li></ul><p>é¿å…ä½¿ç”¨ Truffle backend çš„åœºæ™¯ï¼š</p><ul><li>âŒ ä»»ä½•éœ€è¦æ–‡ä»¶ã€ç½‘ç»œã€æ•°æ®åº“ IO çš„å·¥ä½œè´Ÿè½½ã€‚</li><li>âŒ éœ€è¦è®¿é—® Secretsã€AI æ¨¡å‹æˆ–ç¬¬ä¸‰æ–¹ API çš„æµç¨‹ã€‚</li><li>âŒ éœ€è¦åŸç”Ÿçº¿ç¨‹/å¼‚æ­¥ååŒçš„åå°ä»»åŠ¡ã€‚</li></ul><h2 id="æŠ€æœ¯ç»†èŠ‚" tabindex="-1">æŠ€æœ¯ç»†èŠ‚ <a class="header-anchor" href="#æŠ€æœ¯ç»†èŠ‚" aria-label="Permalink to â€œæŠ€æœ¯ç»†èŠ‚â€">â€‹</a></h2><ul><li>å®ç°ä½ç½®ï¼š<code>aster-truffle/src/main/java/aster/truffle/runtime</code>ï¼Œæ ¸å¿ƒå…¥å£ <code>Builtins.java</code>ã€<code>AsterLanguage.java</code>ã€‚</li><li>ä¾èµ–ï¼š<code>org.graalvm.truffle:truffle-api:25.0.0</code>ã€<code>org.graalvm.sdk:graal-sdk:25.0.0</code> ç­‰ã€‚</li><li>ç¼–è¯‘ï¼šä½¿ç”¨ Gradle <code>:aster-truffle:compileJava</code> ç›®æ ‡ï¼›éœ€ GraalVM 25 toolchainã€‚</li><li>ä¸å‰ç«¯æ¥å£ï¼šTypeChecker å°† effect/capability å…ƒæ•°æ®æ³¨å…¥ ASTï¼ŒTruffle backend åŸºäºå…ƒæ•°æ®å†³å®šè¿è¡ŒæœŸæ ¡éªŒã€‚</li><li>é”™è¯¯å¤„ç†ï¼šä¸æ”¯æŒ IO çš„ builtin å‡é€šè¿‡ç»Ÿä¸€çš„ <code>ioNotSupportedMessage</code> æŠ›å‡º <code>UnsupportedOperationException</code>ï¼Œå¼•å¯¼ç”¨æˆ·åˆ‡æ¢ backendã€‚</li></ul><h2 id="è¿›ä¸€æ­¥é˜…è¯»" tabindex="-1">è¿›ä¸€æ­¥é˜…è¯» <a class="header-anchor" href="#è¿›ä¸€æ­¥é˜…è¯»" aria-label="Permalink to â€œè¿›ä¸€æ­¥é˜…è¯»â€">â€‹</a></h2><ul><li><a href="./backend-comparison.html">Backend å¯¹æ¯”</a></li><li><a href="./retry-semantics.html">Retry è¯­ä¹‰</a></li><li><a href="./determinism-contract.html">Determinism å¥‘çº¦</a></li></ul>',19)])])}const p=a(t,[["render",c]]);export{h as __pageData,p as default};
