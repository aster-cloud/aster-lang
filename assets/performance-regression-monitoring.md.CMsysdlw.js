import{_ as i,c as a,o as n,aj as t}from"./chunks/framework.Bz2R-749.js";const g=JSON.parse('{"title":"Performance Regression Monitoring","description":"","frontmatter":{},"headers":[],"relativePath":"performance-regression-monitoring.md","filePath":"performance-regression-monitoring.md"}'),l={name:"performance-regression-monitoring.md"};function e(r,s,h,p,d,k){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="performance-regression-monitoring" tabindex="-1">Performance Regression Monitoring <a class="header-anchor" href="#performance-regression-monitoring" aria-label="Permalink to “Performance Regression Monitoring”">​</a></h1><p>本文档说明 Aster 语言性能回归监控系统的使用方法和维护指南。</p><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to “概述”">​</a></h2><p>性能基准测试集成到 CI 流水线中，提供持续的性能监控和回归检测能力。基准测试包括三个后端实现：</p><ul><li><strong>GraalVM JIT</strong>: 优化后的执行（JIT 编译后性能）</li><li><strong>Truffle Interpreter</strong>: 未优化的 AST 解释执行</li><li><strong>Pure Java</strong>: 直接字节码生成</li></ul><h2 id="阈值配置" tabindex="-1">阈值配置 <a class="header-anchor" href="#阈值配置" aria-label="Permalink to “阈值配置”">​</a></h2><p>性能回归阈值定义在 <code>benchmarks/performance-thresholds.json</code> 文件中。</p><h3 id="阈值类型" tabindex="-1">阈值类型 <a class="header-anchor" href="#阈值类型" aria-label="Permalink to “阈值类型”">​</a></h3><h4 id="_1-warning-阈值-警告" tabindex="-1">1. Warning 阈值（警告） <a class="header-anchor" href="#_1-warning-阈值-警告" aria-label="Permalink to “1. Warning 阈值（警告）”">​</a></h4><ul><li><strong>用途</strong>: 表明性能可能存在轻微退化，需要关注但不阻塞构建</li><li><strong>典型值</strong>: 基线的 15-20%</li><li><strong>触发行为</strong>: 记录警告日志，在 CI 输出中显示</li></ul><h4 id="_2-error-阈值-错误" tabindex="-1">2. Error 阈值（错误） <a class="header-anchor" href="#_2-error-阈值-错误" aria-label="Permalink to “2. Error 阈值（错误）”">​</a></h4><ul><li><strong>用途</strong>: 表明明确的性能回归，需要立即调查</li><li><strong>典型值</strong>: 基线的 30-40%</li><li><strong>触发行为</strong>: 记录错误日志，标记性能问题（但不失败构建）</li></ul><h3 id="阈值设计原则" tabindex="-1">阈值设计原则 <a class="header-anchor" href="#阈值设计原则" aria-label="Permalink to “阈值设计原则”">​</a></h3><ol><li><strong>允许正常波动</strong>: 15-20% 的警告阈值允许 JVM 预热、系统负载等正常波动</li><li><strong>区分真实回归</strong>: 30-40% 的错误阈值确保只有明确的性能退化才会触发</li><li><strong>差异化处理</strong>: <ul><li>执行时间 &lt; 1ms 的基准测试使用更高的阈值（20%），因为相对波动更大</li><li>执行时间 &gt; 10ms 的基准测试使用更严格的阈值（15%），因为更稳定</li></ul></li></ol><h2 id="基准测试基线" tabindex="-1">基准测试基线 <a class="header-anchor" href="#基准测试基线" aria-label="Permalink to “基准测试基线”">​</a></h2><h3 id="graalvm-jit-基线-2025-11-03" tabindex="-1">GraalVM JIT 基线（2025-11-03） <a class="header-anchor" href="#graalvm-jit-基线-2025-11-03" aria-label="Permalink to “GraalVM JIT 基线（2025-11-03）”">​</a></h3><table tabindex="0"><thead><tr><th>基准测试</th><th>基线 (ms/迭代)</th><th>Warning 阈值</th><th>Error 阈值</th><th>说明</th></tr></thead><tbody><tr><td>Fibonacci(20)</td><td>26.25</td><td>30.19 ms (+15%)</td><td>34.13 ms (+30%)</td><td>递归调用和函数优化</td></tr><tr><td>Factorial(12)</td><td>5.0</td><td>5.75 ms (+15%)</td><td>6.5 ms (+30%)</td><td>循环优化和整数运算</td></tr><tr><td>QuickSort(100)</td><td>99.37</td><td>114.28 ms (+15%)</td><td>129.18 ms (+30%)</td><td>数组操作和排序算法</td></tr><tr><td>BinaryTree(15)</td><td>0.074</td><td>0.089 ms (+20%)</td><td>0.104 ms (+40%)</td><td>对象创建和树遍历</td></tr><tr><td>StringOps</td><td>0.288</td><td>0.331 ms (+15%)</td><td>0.374 ms (+30%)</td><td>文本操作和字符串内置函数</td></tr></tbody></table><h3 id="truffle-interpreter-基线-估算" tabindex="-1">Truffle Interpreter 基线（估算） <a class="header-anchor" href="#truffle-interpreter-基线-估算" aria-label="Permalink to “Truffle Interpreter 基线（估算）”">​</a></h3><table tabindex="0"><thead><tr><th>基准测试</th><th>基线 (ms/迭代)</th><th>Warning 阈值</th><th>Error 阈值</th></tr></thead><tbody><tr><td>Factorial</td><td>1.5</td><td>1.8 ms (+20%)</td><td>2.1 ms (+40%)</td></tr><tr><td>Fibonacci</td><td>8.0</td><td>9.6 ms (+20%)</td><td>11.2 ms (+40%)</td></tr><tr><td>List.map</td><td>12.0</td><td>14.4 ms (+20%)</td><td>16.8 ms (+40%)</td></tr><tr><td>Arithmetic</td><td>0.5</td><td>0.6 ms (+20%)</td><td>0.7 ms (+40%)</td></tr></tbody></table><h3 id="pure-java-基线-估算" tabindex="-1">Pure Java 基线（估算） <a class="header-anchor" href="#pure-java-基线-估算" aria-label="Permalink to “Pure Java 基线（估算）”">​</a></h3><table tabindex="0"><thead><tr><th>基准测试</th><th>基线 (ms/迭代)</th><th>Warning 阈值</th><th>Error 阈值</th></tr></thead><tbody><tr><td>Factorial</td><td>0.3</td><td>0.345 ms (+15%)</td><td>0.39 ms (+30%)</td></tr><tr><td>Fibonacci</td><td>1.8</td><td>2.07 ms (+15%)</td><td>2.34 ms (+30%)</td></tr><tr><td>List.map</td><td>2.5</td><td>2.875 ms (+15%)</td><td>3.25 ms (+30%)</td></tr><tr><td>Result.mapOk</td><td>1.0</td><td>1.15 ms (+15%)</td><td>1.3 ms (+30%)</td></tr><tr><td>Result.mapErr</td><td>1.0</td><td>1.15 ms (+15%)</td><td>1.3 ms (+30%)</td></tr></tbody></table><h2 id="使用方法" tabindex="-1">使用方法 <a class="header-anchor" href="#使用方法" aria-label="Permalink to “使用方法”">​</a></h2><h3 id="运行基准测试" tabindex="-1">运行基准测试 <a class="header-anchor" href="#运行基准测试" aria-label="Permalink to “运行基准测试”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行所有基准测试</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench:all</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行单个后端</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench:truffle</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Truffle 解释器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench:java</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # Pure Java 字节码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench:jit</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # GraalVM JIT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CI 集成（非阻塞）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ci:bench</span></span></code></pre></div><h3 id="解读结果" tabindex="-1">解读结果 <a class="header-anchor" href="#解读结果" aria-label="Permalink to “解读结果”">​</a></h3><p>基准测试输出包含：</p><ol><li><strong>执行时间</strong>: 每次迭代的平均执行时间（毫秒）</li><li><strong>迭代次数</strong>: 测量阶段的迭代次数</li><li><strong>与基线比较</strong>: 如果实现了阈值检查，会显示与基线的差异</li></ol><h4 id="示例输出" tabindex="-1">示例输出 <a class="header-anchor" href="#示例输出" aria-label="Permalink to “示例输出”">​</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>=== Fibonacci(20) Heavy (GraalVM JIT) ===</span></span>
<span class="line"><span>Phase 1: 冷启动 200 次，触发编译...</span></span>
<span class="line"><span>Phase 2: 追加预热 2000 次，等待优化稳定...</span></span>
<span class="line"><span>Phase 3: 测量阶段（200 次）...</span></span>
<span class="line"><span>GraalVM JIT: 26.25 ms/iteration</span></span>
<span class="line"><span>✓ PASS - Within baseline threshold (26.25 ms &lt; 30.19 ms warning)</span></span></code></pre></div><h4 id="回归警告示例" tabindex="-1">回归警告示例 <a class="header-anchor" href="#回归警告示例" aria-label="Permalink to “回归警告示例”">​</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>⚠️ WARNING - Performance degradation detected</span></span>
<span class="line"><span>Fibonacci(20): 32.5 ms/iteration</span></span>
<span class="line"><span>Expected: &lt; 30.19 ms (warning threshold)</span></span>
<span class="line"><span>Baseline: 26.25 ms</span></span>
<span class="line"><span>Degradation: +23.8%</span></span></code></pre></div><h4 id="回归错误示例" tabindex="-1">回归错误示例 <a class="header-anchor" href="#回归错误示例" aria-label="Permalink to “回归错误示例”">​</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>❌ ERROR - Significant performance regression</span></span>
<span class="line"><span>Fibonacci(20): 38.0 ms/iteration</span></span>
<span class="line"><span>Expected: &lt; 34.13 ms (error threshold)</span></span>
<span class="line"><span>Baseline: 26.25 ms</span></span>
<span class="line"><span>Degradation: +44.8%</span></span>
<span class="line"><span>Action required: Investigate performance regression</span></span></code></pre></div><h2 id="维护指南" tabindex="-1">维护指南 <a class="header-anchor" href="#维护指南" aria-label="Permalink to “维护指南”">​</a></h2><h3 id="何时更新基线" tabindex="-1">何时更新基线 <a class="header-anchor" href="#何时更新基线" aria-label="Permalink to “何时更新基线”">​</a></h3><p>应该在以下情况下更新基线值：</p><ol><li><p><strong>实现性能优化</strong>:</p><ul><li>新的编译器优化</li><li>改进的内置函数实现</li><li>更高效的运行时数据结构</li></ul></li><li><p><strong>预期的性能变化</strong>:</p><ul><li>添加新功能导致的合理性能影响</li><li>权衡正确性与性能的设计决策</li></ul></li><li><p><strong>基础设施变化</strong>:</p><ul><li>升级 JVM 版本</li><li>升级 GraalVM 版本</li><li>变更 CI 环境的硬件配置</li></ul></li></ol><h3 id="更新基线的步骤" tabindex="-1">更新基线的步骤 <a class="header-anchor" href="#更新基线的步骤" aria-label="Permalink to “更新基线的步骤”">​</a></h3><ol><li><p><strong>运行基准测试并收集数据</strong>:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行多次以确保稳定性</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench:jit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench:truffle</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bench:java</span></span></code></pre></div></li><li><p><strong>计算新的基线值</strong>:</p><ul><li>取多次运行的中位数或平均值</li><li>确保值是可复现的（变异系数 &lt; 5%）</li></ul></li><li><p><strong>更新 <code>performance-thresholds.json</code></strong>:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;fibonacci_20&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;baseline_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 更新后的基线</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;warning_threshold_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">28.75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// baseline * 1.15</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;error_threshold_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32.5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // baseline * 1.30</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>记录变更原因</strong>:</p><ul><li>在 <code>CHANGELOG.md</code> 中记录基线更新</li><li>说明性能改进或变化的原因</li><li>包含新旧基线的对比</li></ul></li></ol><h3 id="调整阈值百分比" tabindex="-1">调整阈值百分比 <a class="header-anchor" href="#调整阈值百分比" aria-label="Permalink to “调整阈值百分比”">​</a></h3><p>如果发现误报或漏报，可以调整阈值百分比：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;fibonacci_20&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;baseline_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">26.25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;warning_threshold_percent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 从 15% 提高到 20%</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;error_threshold_percent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">35</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 从 30% 提高到 35%</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;warning_threshold_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">31.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;error_threshold_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">35.44</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>调整原则</strong>:</p><ul><li>增加阈值：如果经常出现误报（正常波动触发警告）</li><li>降低阈值：如果需要更严格的性能监控</li><li>保持记录：在 <code>notes</code> 字段中记录调整原因</li></ul><h2 id="故障排查" tabindex="-1">故障排查 <a class="header-anchor" href="#故障排查" aria-label="Permalink to “故障排查”">​</a></h2><h3 id="基准测试失败或超时" tabindex="-1">基准测试失败或超时 <a class="header-anchor" href="#基准测试失败或超时" aria-label="Permalink to “基准测试失败或超时”">​</a></h3><p><strong>症状</strong>: 基准测试运行时间过长或无法完成</p><p><strong>可能原因</strong>:</p><ol><li>工作负载过大（如 Fibonacci(35)）</li><li>预热迭代过多</li><li>测量迭代过多</li></ol><p><strong>解决方法</strong>:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在 GraalVMJitBenchmark.java 中调整参数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BenchmarkCase FIBONACCI_HEAVY </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BenchmarkCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;Fibonacci(20) Heavy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;bench-fibonacci20-jit.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    readBenchmarkJsonUnchecked</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;benchmarks/core/fibonacci_20_core.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    6_765</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// coldIterations - 减少冷启动次数</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// warmupIterations - 减少预热次数</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    2_000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // measureIterations - 减少测量次数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="性能波动过大" tabindex="-1">性能波动过大 <a class="header-anchor" href="#性能波动过大" aria-label="Permalink to “性能波动过大”">​</a></h3><p><strong>症状</strong>: 相同代码在不同运行中性能差异 &gt; 10%</p><p><strong>可能原因</strong>:</p><ol><li>JVM 预热不足</li><li>系统负载波动</li><li>GC 活动干扰</li></ol><p><strong>解决方法</strong>:</p><ol><li>增加预热迭代次数</li><li>在专用 CI 节点上运行基准测试</li><li>运行多次取中位数</li></ol><h3 id="ci-环境中的性能差异" tabindex="-1">CI 环境中的性能差异 <a class="header-anchor" href="#ci-环境中的性能差异" aria-label="Permalink to “CI 环境中的性能差异”">​</a></h3><p><strong>症状</strong>: 本地性能正常，CI 中触发回归警告</p><p><strong>可能原因</strong>:</p><ol><li>CI 环境硬件配置不同</li><li>容器资源限制</li><li>共享资源竞争</li></ol><p><strong>解决方法</strong>:</p><ol><li>建立 CI 环境的专属基线</li><li>使用相对性能比较而非绝对值</li><li>考虑提高 CI 环境的阈值</li></ol><h2 id="未来改进" tabindex="-1">未来改进 <a class="header-anchor" href="#未来改进" aria-label="Permalink to “未来改进”">​</a></h2><h3 id="计划中的增强功能" tabindex="-1">计划中的增强功能 <a class="header-anchor" href="#计划中的增强功能" aria-label="Permalink to “计划中的增强功能”">​</a></h3><ol><li><p><strong>自动化阈值检查</strong>:</p><ul><li>实现 Java 工具类读取 <code>performance-thresholds.json</code></li><li>在基准测试结束后自动比较结果</li><li>生成结构化的回归报告</li></ul></li><li><p><strong>历史趋势分析</strong>:</p><ul><li>记录每次 CI 运行的性能数据</li><li>绘制性能趋势图表</li><li>识别渐进式性能退化</li></ul></li><li><p><strong>多维度比较</strong>:</p><ul><li>跨后端性能比较（Truffle vs Pure Java vs GraalVM JIT）</li><li>跨版本性能比较</li><li>跨分支性能比较</li></ul></li><li><p><strong>智能基线更新</strong>:</p><ul><li>基于统计分析自动建议基线调整</li><li>异常值检测和过滤</li><li>自适应阈值调整</li></ul></li></ol><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to “参考资料”">​</a></h2><ul><li><a href="./cross-backend-benchmark-results.html">Cross-Backend Benchmark Results</a></li><li><a href="./truffle-performance-comparison.html">Truffle Performance Comparison</a></li><li><a href="https://www.graalvm.org/latest/reference-manual/" target="_blank" rel="noreferrer">GraalVM Documentation</a></li><li><a href="https://www.graalvm.org/latest/graalvm-as-a-platform/language-implementation-framework/" target="_blank" rel="noreferrer">Truffle Framework</a></li></ul>`,68)])])}const c=i(l,[["render",e]]);export{g as __pageData,c as default};
