import{_ as a,c as s,o as e,aj as t}from"./chunks/framework.Bz2R-749.js";const k=JSON.parse('{"title":"Java 25 Compatibility Guide","description":"","frontmatter":{},"headers":[],"relativePath":"java25-compatibility.md","filePath":"java25-compatibility.md"}'),n={name:"java25-compatibility.md"};function l(r,i,h,o,p,d){return e(),s("div",null,[...i[0]||(i[0]=[t(`<h1 id="java-25-compatibility-guide" tabindex="-1">Java 25 Compatibility Guide <a class="header-anchor" href="#java-25-compatibility-guide" aria-label="Permalink to “Java 25 Compatibility Guide”">​</a></h1><h2 id="native-access-warnings" tabindex="-1">Native Access Warnings <a class="header-anchor" href="#native-access-warnings" aria-label="Permalink to “Native Access Warnings”">​</a></h2><p>When building Aster with Java 25 and Gradle 9.0.0, you may encounter warnings about restricted native access:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>WARNING: A restricted method in java.lang.System has been called</span></span>
<span class="line"><span>WARNING: java.lang.System::load has been called by net.rubygrapefruit.platform.internal.NativeLibraryLoader</span></span>
<span class="line"><span>WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module</span></span>
<span class="line"><span>WARNING: Restricted methods will be blocked in a future release unless native access is enabled</span></span></code></pre></div><h2 id="root-cause" tabindex="-1">Root Cause <a class="header-anchor" href="#root-cause" aria-label="Permalink to “Root Cause”">​</a></h2><p>These warnings originate from Gradle&#39;s native-platform library (<code>net.rubygrapefruit.platform</code>), which uses <code>System::load</code> to load native libraries. In Java 25, this is now a restricted method that requires explicit permission.</p><h2 id="solutions" tabindex="-1">Solutions <a class="header-anchor" href="#solutions" aria-label="Permalink to “Solutions”">​</a></h2><h3 id="option-1-use-the-wrapper-script-recommended" tabindex="-1">Option 1: Use the Wrapper Script (Recommended) <a class="header-anchor" href="#option-1-use-the-wrapper-script-recommended" aria-label="Permalink to “Option 1: Use the Wrapper Script (Recommended)”">​</a></h3><p>The easiest way is to use the provided <code>gradlew-java25</code> wrapper script:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew-java25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew-java25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew-java25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span></span></code></pre></div><p>This script automatically sets <code>GRADLE_OPTS</code> to enable native access.</p><h3 id="option-2-set-gradle-opts-manually" tabindex="-1">Option 2: Set GRADLE_OPTS Manually <a class="header-anchor" href="#option-2-set-gradle-opts-manually" aria-label="Permalink to “Option 2: Set GRADLE_OPTS Manually”">​</a></h3><p>For individual commands:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GRADLE_OPTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--enable-native-access=ALL-UNNAMED&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p>Or export it for your shell session:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GRADLE_OPTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--enable-native-access=ALL-UNNAMED&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div><h3 id="option-3-source-the-configuration-file" tabindex="-1">Option 3: Source the Configuration File <a class="header-anchor" href="#option-3-source-the-configuration-file" aria-label="Permalink to “Option 3: Source the Configuration File”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .gradle-jvmargs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><h3 id="option-4-add-to-shell-profile-permanent" tabindex="-1">Option 4: Add to Shell Profile (Permanent) <a class="header-anchor" href="#option-4-add-to-shell-profile-permanent" aria-label="Permalink to “Option 4: Add to Shell Profile (Permanent)”">​</a></h3><p>Add to <code>~/.bashrc</code>, <code>~/.zshrc</code>, or <code>~/.profile</code>:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GRADLE_OPTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--enable-native-access=ALL-UNNAMED&quot;</span></span></code></pre></div><p>Then restart your shell or run <code>source ~/.bashrc</code> (or appropriate file).</p><h2 id="ide-configuration" tabindex="-1">IDE Configuration <a class="header-anchor" href="#ide-configuration" aria-label="Permalink to “IDE Configuration”">​</a></h2><h3 id="intellij-idea" tabindex="-1">IntelliJ IDEA <a class="header-anchor" href="#intellij-idea" aria-label="Permalink to “IntelliJ IDEA”">​</a></h3><ol><li>Go to <strong>Settings</strong> → <strong>Build, Execution, Deployment</strong> → <strong>Build Tools</strong> → <strong>Gradle</strong></li><li>In <strong>Gradle JVM</strong>, ensure Java 25 is selected</li><li>Add to <strong>VM options</strong>: <code>--enable-native-access=ALL-UNNAMED</code></li></ol><p>Or configure in <strong>Preferences</strong> → <strong>Build, Execution, Deployment</strong> → <strong>Gradle</strong>:</p><ul><li>Set <strong>Gradle JVM</strong> to your Java 25 installation</li><li>In <strong>Gradle VM options</strong>: <code>--enable-native-access=ALL-UNNAMED</code></li></ul><h3 id="vs-code" tabindex="-1">VS Code <a class="header-anchor" href="#vs-code" aria-label="Permalink to “VS Code”">​</a></h3><p>Add to <code>.vscode/settings.json</code>:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;java.jdt.ls.vmargs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--enable-native-access=ALL-UNNAMED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;gradle.javaDebug.tasks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;run&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;javaDebug&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;jvmArgs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--enable-native-access=ALL-UNNAMED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="why-this-warning-exists" tabindex="-1">Why This Warning Exists <a class="header-anchor" href="#why-this-warning-exists" aria-label="Permalink to “Why This Warning Exists”">​</a></h2><p>Java 25 introduced stricter controls over native code access as part of Project Panama and JEP 454 (Foreign Function &amp; Memory API). The Java platform aims to:</p><ol><li><strong>Improve Security</strong>: Prevent unauthorized native code execution</li><li><strong>Enhance Safety</strong>: Make native access explicit and auditable</li><li><strong>Prepare for Future</strong>: Restricted methods will eventually be blocked entirely</li></ol><h2 id="impact-on-aster-project" tabindex="-1">Impact on Aster Project <a class="header-anchor" href="#impact-on-aster-project" aria-label="Permalink to “Impact on Aster Project”">​</a></h2><ul><li><strong>Build Time</strong>: Warnings appear but do not affect build success</li><li><strong>Runtime</strong>: No impact - these warnings are only during Gradle&#39;s own startup</li><li><strong>Future Compatibility</strong>: Gradle will likely update their native-platform library to address this in future versions</li></ul><h2 id="gradle-s-fix-timeline" tabindex="-1">Gradle&#39;s Fix Timeline <a class="header-anchor" href="#gradle-s-fix-timeline" aria-label="Permalink to “Gradle&#39;s Fix Timeline”">​</a></h2><p>Gradle is aware of this issue and working on a fix for native-platform:</p><ul><li>Issue tracked at: <a href="https://github.com/gradle/native-platform/issues" target="_blank" rel="noreferrer">https://github.com/gradle/native-platform/issues</a></li><li>Expected in Gradle 9.x or 10.0</li><li>In the meantime, using <code>--enable-native-access=ALL-UNNAMED</code> is the recommended workaround</li></ul><h2 id="gradle-properties-configuration" tabindex="-1">gradle.properties Configuration <a class="header-anchor" href="#gradle-properties-configuration" aria-label="Permalink to “gradle.properties Configuration”">​</a></h2><p>The project already includes configuration in <code>gradle.properties</code>:</p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Java 25 native access: Allow Gradle&#39;s native-platform to load native libraries</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># This suppresses warnings from Gradle 9.0.0&#39;s NativeLibraryLoader</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Note: Also affects the Gradle daemon and build processes</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">org.gradle.jvmargs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=-XX:+UnlockExperimentalVMOptions --</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enable-native-access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=ALL-UNNAMED</span></span></code></pre></div><p><strong>Note</strong>: This configuration affects the Gradle daemon JVM, but not the initial Gradle launcher process. For complete warning suppression, you still need to set <code>GRADLE_OPTS</code>.</p><h2 id="verification" tabindex="-1">Verification <a class="header-anchor" href="#verification" aria-label="Permalink to “Verification”">​</a></h2><p>To verify the warnings are suppressed:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Should show no warnings, only BUILD SUCCESSFUL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew-java25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;&amp;1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;WARNING|BUILD&quot;</span></span></code></pre></div><p>Expected output:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>BUILD SUCCESSFUL in Xs</span></span></code></pre></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to “Troubleshooting”">​</a></h2><h3 id="warnings-still-appear" tabindex="-1">Warnings Still Appear <a class="header-anchor" href="#warnings-still-appear" aria-label="Permalink to “Warnings Still Appear”">​</a></h3><p>If you still see warnings after setting GRADLE_OPTS:</p><ol><li><p><strong>Check Environment</strong>: Ensure GRADLE_OPTS is actually set</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $GRADLE_OPTS</span></span></code></pre></div></li><li><p><strong>Restart Gradle Daemon</strong>:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./gradlew</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --stop</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GRADLE_OPTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--enable-native-access=ALL-UNNAMED&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ./gradlew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span></span></code></pre></div></li><li><p><strong>Verify Java Version</strong>:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -version</span></span></code></pre></div><p>Should show Java 25 or later.</p></li></ol><h3 id="build-failures" tabindex="-1">Build Failures <a class="header-anchor" href="#build-failures" aria-label="Permalink to “Build Failures”">​</a></h3><p>If the <code>--enable-native-access</code> flag causes build failures:</p><ol><li>Ensure you&#39;re using Java 25+ (the flag is only available in recent versions)</li><li>Check for typos in the flag name</li><li>Try without <code>-XX:+UnlockExperimentalVMOptions</code> if you added it</li></ol><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to “References”">​</a></h2><ul><li><a href="https://openjdk.org/jeps/454" target="_blank" rel="noreferrer">JEP 454: Foreign Function &amp; Memory API</a></li><li><a href="https://openjdk.org/jeps/471" target="_blank" rel="noreferrer">JEP 471: Deprecate the Memory-Access Methods in sun.misc.Unsafe</a></li><li><a href="https://github.com/gradle/native-platform" target="_blank" rel="noreferrer">Gradle Native Platform</a></li><li><a href="https://openjdk.org/projects/jdk/25/" target="_blank" rel="noreferrer">Java 25 Release Notes</a></li></ul><h2 id="future-migration" tabindex="-1">Future Migration <a class="header-anchor" href="#future-migration" aria-label="Permalink to “Future Migration”">​</a></h2><p>When Gradle releases an update that fully supports Java 25&#39;s native access model:</p><ol><li>Update <code>gradle/wrapper/gradle-wrapper.properties</code> to the new version</li><li>Remove the <code>--enable-native-access</code> workaround from configurations</li><li>Test that builds complete without warnings</li><li>Update this documentation accordingly</li></ol>`,59)])])}const g=a(n,[["render",l]]);export{k as __pageData,g as default};
