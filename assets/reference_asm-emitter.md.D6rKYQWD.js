import{_ as a,c as t,o as i,aj as o}from"./chunks/framework.Bz2R-749.js";const p=JSON.parse('{"title":"ASM Emitter Coverage & Validation (MVP)","description":"","frontmatter":{},"headers":[],"relativePath":"reference/asm-emitter.md","filePath":"reference/asm-emitter.md"}'),s={name:"reference/asm-emitter.md"};function l(n,e,d,r,c,m){return i(),t("div",null,[...e[0]||(e[0]=[o('<h1 id="asm-emitter-coverage-validation-mvp" tabindex="-1">ASM Emitter Coverage &amp; Validation (MVP) <a class="header-anchor" href="#asm-emitter-coverage-validation-mvp" aria-label="Permalink to “ASM Emitter Coverage &amp; Validation (MVP)”">​</a></h1><p>The <code>aster-asm-emitter</code> Gradle module turns Core IR JSON into JVM class files using ASM. Coverage is intentionally small but growing.</p><h2 id="what-it-handles-today" tabindex="-1">What It Handles Today <a class="header-anchor" href="#what-it-handles-today" aria-label="Permalink to “What It Handles Today”">​</a></h2><ul><li>Data classes with public final fields and a generated constructor.</li><li>Enums (constants only, no bodies).</li><li>Functions (static methods) with a subset of statements: <ul><li><code>Let</code>, <code>If</code> (with optional else), <code>Match</code> (on <code>null</code>, data ctor, enum variants with tableswitch), <code>Return</code>.</li><li>Simple call patterns for numeric ops and boolean <code>not</code>.</li><li>Ok/Err construction (erased to <code>aster.runtime.Result</code> hierarchy).</li></ul></li></ul><p>What it does not handle yet:</p><ul><li>Async (<code>Start</code>, <code>Wait</code>), <code>Scope</code> lowering is partial.</li><li>Loops, and full interop/generics.</li><li>Lambda/function values (see Lambdas &amp; Closures draft).</li></ul><h2 id="quick-validation" tabindex="-1">Quick Validation <a class="header-anchor" href="#quick-validation" aria-label="Permalink to “Quick Validation”">​</a></h2><p>Run class emission on representative programs and disassemble with <code>javap</code>:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>npm run verify:asm</span></span></code></pre></div><p>This compiles <code>test/cnl/examples/login.aster</code> and <code>test/cnl/examples/greet.aster</code> to <code>build/jvm-classes</code>, then runs <code>javap -v</code> across all <code>.class</code> files.</p><h2 id="recent-coverage-additions" tabindex="-1">Recent Coverage Additions <a class="header-anchor" href="#recent-coverage-additions" aria-label="Permalink to “Recent Coverage Additions”">​</a></h2><ul><li>Enum constants as expressions (<code>InvalidCreds</code>) emit <code>getstatic</code> on the enum type.</li><li>Enum matches: optimized <code>tableswitch</code> on <code>.ordinal()</code> when exhaustive over a single enum.</li><li>Fallback enum/name matches: reference equality checks; wildcard <code>PatName</code> acts as catch-all.</li><li>Try/catch wrapper for <code>Result</code> returns: interop calls producing <code>Ok/Err</code> via exception-to-string mapping.</li></ul><h2 id="roadmap" tabindex="-1">Roadmap <a class="header-anchor" href="#roadmap" aria-label="Permalink to “Roadmap”">​</a></h2><ul><li>Support nested destructuring in <code>Match</code>.</li><li>Lambdas &amp; closures: see <a href="./lambdas.html">Lambdas &amp; Closures (Design Draft)</a>.</li><li>Broaden expression coverage and basic loops.</li></ul>',14)])])}const u=a(s,[["render",l]]);export{p as __pageData,u as default};
