import{_ as i,c as a,o as l,aj as n}from"./chunks/framework.Bz2R-749.js";const h=JSON.parse('{"title":"Native Image (GraalVM)","description":"","frontmatter":{},"headers":[],"relativePath":"reference/native.md","filePath":"reference/native.md"}'),t={name:"reference/native.md"};function o(r,e,c,s,d,m){return l(),a("div",null,[...e[0]||(e[0]=[n('<h1 id="native-image-graalvm" tabindex="-1">Native Image (GraalVM) <a class="header-anchor" href="#native-image-graalvm" aria-label="Permalink to “Native Image (GraalVM)”">​</a></h1><p>This project is designed to be reflection‑free by default:</p><ul><li>The ASM emitter generates final classes and static methods.</li><li>Interop helpers (in <code>aster-runtime</code>) expose static methods only (no reflection or proxies).</li><li>The Truffle/Java paths avoid dynamic proxies and invokedynamic.</li></ul><h2 id="requirements" tabindex="-1">Requirements <a class="header-anchor" href="#requirements" aria-label="Permalink to “Requirements”">​</a></h2><ul><li>GraalVM JDK 21 with native‑image installed</li><li>macOS: Xcode toolchain (agree to the license: <code>sudo xcodebuild -license</code>)</li></ul><h2 id="running-the-native-sample-lenient-ci-mode" tabindex="-1">Running the native sample (lenient CI mode) <a class="header-anchor" href="#running-the-native-sample-lenient-ci-mode" aria-label="Permalink to “Running the native sample (lenient CI mode)”">​</a></h2><p>The repository includes a small native sample in <code>examples/hello-native</code>.</p><ul><li>Local run (fails if toolchain missing): <ul><li><code>npm run native:hello</code></li></ul></li><li>Lenient CI run (logs a warning if toolchain not ready): <ul><li><code>npm run native:hello:lenient</code></li></ul></li></ul><p>Both commands first emit classes via the ASM emitter (reflection‑free bytecode), then compile a tiny driver to a native executable.</p><h2 id="reflection‐free-policy" tabindex="-1">Reflection‑free policy <a class="header-anchor" href="#reflection‐free-policy" aria-label="Permalink to “Reflection‑free policy”">​</a></h2><ul><li>Do: <ul><li>Generate plain classes and static methods.</li><li>Keep runtime helpers as small, static utilities.</li></ul></li><li>Don’t: <ul><li>Introduce reflection (e.g., <code>Class.forName</code>, <code>Method.invoke</code>) in production code.</li><li>Use dynamic proxies or invokedynamic for critical paths.</li></ul></li></ul><p>If reflection becomes necessary for specific features, provide explicit <code>reflect-config.json</code> and template it in build scripts as needed. The current code base does not require any reflection configuration.</p>',12)])])}const u=i(t,[["render",o]]);export{h as __pageData,u as default};
