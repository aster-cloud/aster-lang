import{_ as i,c as a,o as t,aj as e}from"./chunks/framework.Bz2R-749.js";const c=JSON.parse('{"title":"包管理快速入门","description":"","frontmatter":{},"headers":[],"relativePath":"guide/getting-started-packages.md","filePath":"guide/getting-started-packages.md"}'),l={name:"guide/getting-started-packages.md"};function n(p,s,h,k,d,r){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="包管理快速入门" tabindex="-1">包管理快速入门 <a class="header-anchor" href="#包管理快速入门" aria-label="Permalink to “包管理快速入门”">​</a></h1><blockquote><p>更新：2025-11-25 09:46 NZST · Codex</p></blockquote><p>Aster 自带的包管理器帮助你在不同项目之间重用模块、锁定依赖版本，并保持构建结果可复现。本指南通过三个步骤带你完成：理解包管理的作用、安装第一个包、查看与验证当前安装。</p><h2 id="什么是包管理" tabindex="-1">什么是包管理 <a class="header-anchor" href="#什么是包管理" aria-label="Permalink to “什么是包管理”">​</a></h2><p>Aster 包管理器会读取项目根目录的 <code>manifest.json</code>，解析依赖树并将下载的包缓存在 <code>~/.aster/cache</code>。解析过程遵循 SemVer 匹配和回溯策略：当多个依赖请求不同版本时，解析器会尝试按照“最高兼容版本 → 次高版本 → 回退”的顺序寻找解，直到所有约束得到满足。解析结果会写入 <code>aster.lock</code>，确保团队成员获得完全一致的依赖集。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>当你在 monorepo 中维护多个子项目时，可以将它们指向同一个 <code>~/.aster/cache</code>，利用硬链接在秒级完成安装。</p></div><p>下面的示例展示了如何在代码中引用外部包提供的模块：</p><div class="language-aster"><button title="Copy Code" class="copy"></button><span class="lang">aster</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> net/http </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import wontlost/collections/list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fn fetchStatus(url: Text): Result[Int, Text] {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  let response = http::get(url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  if response.status == 200 {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Result::Ok(response.status)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } else {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Result::Err(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unexpected status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="安装第一个包" tabindex="-1">安装第一个包 <a class="header-anchor" href="#安装第一个包" aria-label="Permalink to “安装第一个包”">​</a></h2><p>确保 <code>manifest.json</code> 中声明了依赖，例如 <code>&quot;dependencies&quot;: { &quot;wontlost/collections&quot;: &quot;^1.2.0&quot; }</code>。随后运行安装命令：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>典型终端输出如下：</p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>→ reading manifest.json</span></span>
<span class="line"><span>→ resolving wontlost/collections@^1.2.0</span></span>
<span class="line"><span>✓ pinned wontlost/collections@1.2.3 (dist: github)</span></span>
<span class="line"><span>✓ wrote lockfile aster.lock</span></span>
<span class="line"><span>✓ linked packages to .aster/modules</span></span></code></pre></div><p>如果想单独安装某个包，可指定名称与版本：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wontlost/http@1.5.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://packages.aster.dev</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p>默认 registry 会优先尝试 GitHub Releases。若你在离线环境，请在命令中显式传入 <code>--registry</code> 指向镜像，并同步缓存目录，否则解析会持续重试导致安装超时。</p></div><h2 id="查看已安装包" tabindex="-1">查看已安装包 <a class="header-anchor" href="#查看已安装包" aria-label="Permalink to “查看已安装包”">​</a></h2><p>使用 <code>aster pkg list</code> 检查当前项目可用的包：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linked</span></span></code></pre></div><p>可能的输出：</p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Linked modules (project-root/.aster/modules)</span></span>
<span class="line"><span>• wontlost/collections 1.2.3  (capabilities: cpu)</span></span>
<span class="line"><span>• wontlost/http         1.5.0  (capabilities: io.net)</span></span></code></pre></div><p>若需要验证缓存，可运行：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> net/http</span></span></code></pre></div><p>完成安装后，重新编译即可使用新依赖：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span></code></pre></div><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Build completed in 3.4s — packages ready</span></span></code></pre></div><p>将 <code>import wontlost/collections/list as List</code> 写入模块后，IDE 会立即获得类型补全。若 <code>aster pkg list</code> 未列出期望版本，请删除 <code>aster.lock</code> 并重新执行 <code>aster pkg install</code> 以触发解析与回溯。这样一来，你已经完成了包管理的快速入门流程。</p>`,27)])])}const g=i(l,[["render",n]]);export{c as __pageData,g as default};
